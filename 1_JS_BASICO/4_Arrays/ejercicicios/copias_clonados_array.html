<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copiar y clonar arrays</title>
</head>
<body>
    <script>
        // Los datos primitivos son inmutables. Si modificas se crea uno nuevo
        const letras = ['A','B','C'];

        /*
        const letras2 = letras; // dos referencias a los mismos datos
        letras2[0]= 'KK';
        console.log(letras2);
        console.log(letras);*/

        // ---------- Con concat  -----------
        console.log("--- con concat ---");
        // As√≠ no me funciona....
        //let copyOfLetras = [];
        //copyOfLetras.concat(letras);
        const copyOfLetras = [].concat(letras);

        copyOfLetras[0] = 111;
        console.log(copyOfLetras);
        console.log(letras);

        // ---------- Con slice  ----------
        console.log("--- con slice ---");
        const copyOfLetras2 = letras.slice();
        copyOfLetras2[0] = 222;
        console.log(copyOfLetras2);
        console.log(letras);

        // --------- Con operador spread (...) ---------
        console.log("--- con spread (...) ---");
        const copyOfLetras3 = [...letras];
        copyOfLetras3[0] = 333;
        console.log(copyOfLetras3);
        console.log(letras);

        // --------------- AHORA CON OBJETOS -----------
        console.log("--- copiado de array de objetos con spread (...) ---");
        const objetos = [
            {
                id: 1,
                nombre: 'Patata',
                precio: 1
            }    
            ,
            {
                id: 2,
                nombre: 'Cebolla',
                precio: 1.2
            },
            {
                id: 3,
                nombre: 'Calabacin',
                precio: 2.1
            },
            {
                id: 4,
                nombre: 'Fresas',
                precio: 0.6
            }
        ];

        const copyOfObjetos = [...objetos];
        copyOfObjetos[0].precio = 666;

        // -------- El clonado es superficial, no profundo!!!!! ----------
        console.log(copyOfObjetos);
        console.log(objetos);

        
        // Clonado profundo
        console.log("---- CLONADO PROFUNDO DE ARRAY DE OBJETOS---");
        const miJson = JSON.stringify(objetos);
        console.log(miJson);

        const copyDeepOfObjetos = JSON.parse(miJson);
        console.log(copyDeepOfObjetos);
        //const copyDeepOfObjetos = JSON.parse(JSON.stringify(objetos));

        copyDeepOfObjetos[0].precio = 50;

        console.log(copyDeepOfObjetos);
        console.log(objetos);

    </script>
</body>
</html>